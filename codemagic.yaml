workflows:
    react-native-android:
        name: React Native Android 
        max_build_duration: 120
        instance_type: mac_mini
        environment:
            vars:
                CM_KEYSTORE: Encrypted(Z0FBQUFBQmdzNnNvRXpTR3ZTQ2Nlb0t3ZlFGX0x2VGgxTlpZaW04Nk5YSXM5MkZaMWNsSlRrck8tOWxWeG5TcmUyMzVmYlBkN2tCZTVmOUlsU0xpQ2lLNHdMRGFqUHh5bVNOQzJMRms1WlN2UmxfblRNSFVtRldwVTA5bkNQcmxfNy1NbW93SnJSaWJLcko2cEtjS1lTS3ZjZlVlbFkwVjl5M0VTWTZGcEVvQTNZVk5vMEozRFlTUFBka092SXI1Q2Q5Y3lBUDRlWjlVYjZxWGoxZ0pwT2tLZ2h4TVVaelhzLTFQZmVNbDFzZjVVNGhnZGVWYmRmbFBCLWx3cUt4a0dGSXA3Z3dCcmF2SFNTaExQOEtDRGs0U3NUVm5YZ0w4RHhRVGpEX1RqS3hGZHhZZFVycHpBNjJGMzAxaDdRYmVuS0lmTFlLeEtDRFZ3SWlmQlAtVkk0cEQ1Q0FFSV9pamxNemM3U3d0dzNPQVRZN3VhTWRHbFpJcTlRTnFvTUtTRDBzWDNKa0NwM2pualpESGNrVkZlT2tqMk1YbkpuR0czaVM2d01KM3oxMGE0QUtsc2VrbWVSYkdCbElTaTBwbmtaVnpJLVh4QURIQlRHaTNrNmRGUFZSZkNYdVhMUWNXX1J5LU9UcU1ZSzF2dVg1Mm1ZRTJobXJ3SE5acG1jV21YNnpUSS1iSTFpUVNiNkI1bm1tWmpvRENCZVNaeEh5WDVxOGJPZ2Y3VElBV2l0TlcxWnNiR2Z0bjNOX0tHOFMzMXVWZGxiRFkyMmRVNk9scVp0eERpZXh3WkxmNERjTVdkSW5rdy1Ga2ZGSVNaOVZzajdIRUNoekZMQ25raUJKdGdIX0NNdEJVYTI2Z3lQZ1pLX2dFeWZJS25pSmNOc2QzaHNHcHpKZTFKWnQxR3p2WVk2MU8yaWFxNDZGeGM1M2FMS01DWjFKRHRmTndhQjRNWlczd2NGSGZLenlQT18zSkh6S0gyRlZMWlc2bFFCV2RGY0xjcWdwNUZaaTdKZnNfcGVpWlBab1FGOWZ1SFNWNm5mRkdxcWNEWkh4UFk1SF9YbEJDOXFVRDFQbUt5TF8zdFdSYUtneVJ1ZDd3eEZIUHM5Q3ZvMVdXT3pNdDFBeWtFdjNvdGNoNnZIWFZKQ1ZOdDJLZWtiWWlBN0J0UG9RMmxOT0k3OTFBSFpCNEE2NlI5NXNSQ2xpaTZZc0JkNlJ2THBYX1VJZmRIZWx2Y2pfZWVjWS1qMUZvdGJZX2plRnFORS1tSkw3bHVCWmZOS1BrM3JOaE12ZG4zQ0pSSkd4d0E5a2VZYVNKbVhhSHBZanYwakNWdXAteEdYMU9zVEpULWxXbW9oRDhSUjE3NTNXVEpmb0oxb3RwaGF5Y0dZZDZGanBXMEdfMEFlQUdxOW5tZ2ItVXdfb0FpYlVoVGY3cktMZllBSXFUazlabkZMeUNMUTc4ZUxYYUl6UnU4LXZ4MEswbGhHTS1oOHdVNVQxVWEyOFFtRjZkWGJKT21yTGE3YXdfSHpwaDdTUS1LajNaek96azc5Qml5YWRIOUFWUDVYb2lBTXgza0RtVmQ5NUh4S3FNT3E1QlRVeTdpNGhVd0xSaUFkNmJnNWhDcGJnMlR1YmFSQmNtZm1lUXhEX0RiWXY3WG03VjVoYS0xd3lQS29mSlRqYVpwODVQN3pXTVh4T25PMHRydENKM1h5TXR1NC1fcHZiSFRJX3BHSG5EUGdnNm14ZE1KLVNWd2FVZkFMY1NyZTEzX1NkRFA0WkFwUkEwd0N3NFNSa1g4c2RrZV92Qmo0c1U5VzBZeGFGcmpSc3lwbWp4Q1FjUjU4U1k1WDQ4ZWhTMWtGNWdWZkMxdHB6Y3hEWGc3dnJwTWJtVFJpVWZoVHRnYnMzUFdtZ1o1Q0FhVlJRM19uLXQta2h2QnNTYWVFd1R2aTdYczhaQ0trWUdKZ1NXZlpCenVYVG1iU1l5c1RfZkxveElKM01QbUxnQVhCZzZERWdiVFlldTZBQ3FJcXd3SVFuTmFoY296REkwckNhd3VDVVMyaGRiU0FiTnN4WVJ2eWZ6bnFTLVl4cERzd2xPZFNncEYxVFlKb2E2R3NSLXdtdGdnN2FSbzhKOEMwaGlWY3dZTjBkbG0yV2VvX3lVNXNfYTZZVHVCMWdZUlAxbTFKR0JfcEc4LUtiTEZsSVZyaDVfX0htQVN4NlJxaGdrcnhkZ2tjUUd1NlhvWEdIZ0I5SmQ5UEM1X3hrbGVDUnEwNFRBUU5wSHVHQ1hiU1dWR1ZOMXdLT1kxTHJBWk9hRlo1Rkc5dWVnVjlsU3pyUEw1a1hTTi1adkIwek1jM21wMWRVMGROb2ZtOW1QVGZRZDdsMDdzQVJUb0t5YjhjMkhvVGxtRzRUZHByWXFoMUFSSUs2c2tLTVR6SUJVSlBCbHVoLUwtaE90WnpNSHhIYlJyUnh1ODJaeGlrRWdJbTVRTlhHQjlwVzJ1X3VWa1MxY1lxdDVlTzFKc2pGRF9IQlVKdWVXMThzeGs0Vm9fVVZaZFp6bzc1c1poVHhlakh6aE41U0NCRWk3dnhHNnpQOUNhTDVPTTRlTGhZaG9tYURwVk9NVUZYNl9fekxuS3RIUjl6TklnSm9DNkU3Q0JNX3lTUEM1SjlnZHltZ0VQb3Z1ckZsaHJDQUlEYXlQMXRRLXBrX3N4UnNtbF9TRkt1ME1kNFE0alJPbkZsdG1oTjM1c3ZtdkJPVUg5aTM3czlRX1dnUnB3T2dMQU9RRGRuSUF0QVJnZkJTSGlHYWhRU29mNy1vdWZjLUpRajI3QlhXOTF5ekRSbW5KWjZyN3lHZmhlaVRWUFFCTk12Q2kzeDhSTEpJYmJJRDlYQ2tDbllSVlRnSVBLS2tJbEhzc1B3Yy16QndwNlNZN2gzVVlmWXZjRjlzV0dtMmdkaENDUm1vRWM1TDRMWlc3Ulo5SVk1cktiRm1BSm91TVVYT1ptX3hrem5NM3dWNEZSVW5SZXRQejNlWUwtS183U2lxcXVzRk8wbzE3ZE9PcVVGZlNMdjRwVHRnT2hOQ2FfZmNhVGFWN1FfY1I5OEVDbERGSUFnSnR0VUtxX0lNcWFKYzF6U1NiU3laRUNYZ3Z2eWlaRllEMkoyc0pJQ0xmN0pUWGNpUTJrUk9VWWFQaUp0dWYwbmduZ2ZIMlZVQkNSUWhlYjBabUJMSHVraFR0Q1psNWQ0eGNFOVdxMm01dTE4Wl9jSkVneG1JY19ncDJaT1U2eTNCc18zdDRZUURsMEdfRFF2WVlVdHl6blQtT3Jqai1LSlRRTlZQQk5nMnhDWklDUlVEUS1EQXhaalJya3k2RjlIbXdTcG9vQU9ZV1VNejB3Zk5jblRZb3Q1UFpnVkR2RVhuNkxlOHJSMFNtdldfUjRmdHBsNXhVSWtZSmlpTkZaQ2VkUXZoN054RkVOaWZua1RuT0NzUHc1cGYycGhESlBtbnlVMmRYdUltTkVlanVrNzF5WHBwNmtkREFCYjUxejVDV0lGWUUxclZUcFRZUWs5WTVHR0pqS2R1WWlaV1JHdnk0U2FJZXBCQmxvWXNiMzRHZFFyczVyOWgyY2wxRldDV242RTNhcGd6b0Q3X3JsRS1LWGk1UkwwTHpfR1A0Wmd1bi1nNVlmTm9FMHdOLXNMbHZkbXpFdDJpdzdrTV9RZ2NpeUhOakZZR21ySFljNjdTcGtPMDdMdk9wTnNqT195aU45UGh6Qi1Eb1RpckpNY0RLWTJCRzlsX2FFWklBc0FoUTB0UDJtVDdQMER0Rzk1MUpsY01ZZ0tHLUFsSHFpcGFXT2E2RlRhT2hJa29pbVYzYzEwOFUtTGFPSkthWVNhWTlzWXhSdGNkM055QzJHNEk4TGhNN1ZtekhRMy13VlgxM29VZm5BNjVQd3NUemJ0cEI2elE4OF9Rdk54bDJVOHBZTmVrVUlYeDFlMmFOS3A4Umo0NmdTU0MxTXM0aGVhV1U1b0xFMVRIMjZBOG1YVXFGVGV2blBZTVRydDVvRWdwT3dQRTdXdElJMVZKTU0wRmZmdWptRUFjMDZJcFFpMWtsUjVUN2oyZGZqSDZvVG5BZG82ZnpSSWVGTjREVmlVN1A0YW9vSHRWT3VyOG0wd2JwaFhLVnZBclgwSi1JNU9NcVN5dXA2VDhmWFlTSmoyejhTZmowUEIzQ3VQRkJmWFVCOWRKZG8wQkRNdWpJbDRHR0tNakdlTGtkQ05LNzE0QmhyT18wbHlpb2ZnSHNDN04yWVY0RGFHZUtnNkJpNWNjMTMyU0FIR1FQS2dJZEZFbE5CdVY4QnJSMDhoMEtzY05BazZQMld5X2d0MnZTVlBFbWFVbTd6cTdEV2l3STNybzlCYjhuOXNKZVlEVmd0X2RJMjhXTkoyMTBfSmRzSDlVQUhhVFRFZnVHRzIyM29UYkhFWndqdldhOGh0eGtxYmg3WERVdG9pUXlPbjdqRHprNHEzdGNwaDFUZjI0d3d6a0NWaTJ5ZXVIRGNVdWVPSktxVk1HUUJZNUhQM2NSVWxINzZHMUE1SUJQWGVHbDJwb2F5alFPU3ZfaWo4ZG80VWhhYjE0UUVFMFBpd1dOODF0bzkxRHNiVjBCTEpHcmR3UXFZVWtYekNwOWNldE1OOEk2YmxyVjU3UVY2elNJd3U5QlFEOV9CMEFjY1hibUZhQW0yVnFvNk9HMHpzc1BkLUxUamZBbWtfdVVpZENIV1F4Z194WGlUWWxuclN2TUlKTHBrR2FyQmNfQU5QTmxpOGF2bm5VbzFOOFMwcW40U2V1dkNRazEzOUd5UTIzbGVwNkRRTnZ0VTd5cnBWOHZFZllTM3RqTm4yZEwwX0g4V3J4U2Uta0ZSQkRoSUNRd1JwVTdYNHpxeUdtaDdYWkItS2lCOGQ0T0ozZUNoYTVjWFZua1pHNVphUV9ZWjB2b3FKVDN4ZloweTVMdjBDa0FEbW9BUDI3aTUxbmpzYXR5SEJSYjlwUjJ4enQ3ZXltS1F2NFRTdFNTcFkzLU83TVdCUzd0WGhhVXlNQ0xZUGxJbVM2TzJQbzZMQzFXUE9RWUZ5aGREVGg0RHZJcmRaSXJnUXRaTjN1dXUtbVJTU09sWDkyeGNmbmI5XzJSUmhGWk0tZ1JNR1ZuYjRLSkstNFYtOFJWNzZFRFNWZTZ4amUzN2JyVWJBa2dYZHJFS3BNOWpUeE85TFJPRlNVMm1hWlRqaG9mbldCc3Rvb1E5bWR1bG9Fc3VXcFo3eDQ1V2lTSW5QZUdKbjNCMzl0Znp5XzV4RDBPTEFaZVQ0UUJQX2NFYkFqdFVwYnRwLXo3ZDBvRG9Zd2Jvdl9vQWhiSk5hczIxU0N0MGx5WHhFLWlTUUhycnlqMHNSMDRURDM2UmZvZFphV0NVUjFKWGE1a0xCem1nc0xPSXdKdHlaaENURTVpYWNQMDhDYmZsM196R09pUVJIWklTX3h6TlpVc0lNclN1SHhfd2pCQnRwYmJUc2pwbXQtSXZ6U0pUZzlZSmNzR2tpQTBZd2JSVDVCQjN5TnV2Skd0LW9LOXhIdkNZWHRSY0M0YzgxeFpxMy1yTzkyOEhMdjRjeTJCeTZObjhmRnpuYk44VXkwUXdLZlZ3U1dqeGh5bjQ0U2daY1pzNmVtU2hvU29qajlydDdaZElDRzhDNEVrZm5KaEhMd0lMeGppWnplYXBDNXF0WkRKSW9NRTJGdDVhdk04UlhBRUF3SHJnaHh1bmpBbmpNQ1lVVGRmdDMyTWM0LWZBQ25HbU4xSl9KNVd3X3pLbG80RTkwUkwwRFZpMUlyOG1DOGdObkpObVBySlRDbG92N3VlejhwUWFRMk5tS2dNOU01ZjA5cGpLZW1UV3JxNFR3TTR2SFNNemdSVUFhdFk0N3d0YXplUjRtaHdNMG5mSXVUMkNJUU1hMWtLLVhUSWROazhYSlNIQXBReEpwanMwd21IQWlGX2tZdUlhYnNwclhfU3J0elhuT2RuZXV0TjB6clF5N1l2QkliSkZMNGlTU21uRjM1bHlJRHBHZjAzekpVc0FUZ0l5WmNjM3NYM2ljSUp3cnNuUHd2MWM5T20zNVFfUE9VV1Qwd1g4YU5iNUZvN0dzVFdJTWFoTXl1RWh1VEF5SkVjb2ZGTGRtcGJ4YnlmNUxEaEl2cE9QZjh2WnBDdTJJNGV1WVo1dGZrUUk5eVV0WnR0S0dZcnJWTVF6cXhqalpkalJxcz0=) # <-- Put your encrypted keystore file here
                CM_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmdzNnFnU2lNeEpWTVoyazQybjhtM05vcko0NENpandWVl9pSVRSV2JtRzhqZmNYWnhRRUhiaUJUX2dyYXQ2aUk0RWtsMllxQ1JtMVdXWnI1V19CUGozTzZDOWc9PQ==) # <-- Put your encrypted keystore password here
                CM_KEY_ALIAS_PASSWORD: Encrypted(Z0FBQUFBQmdzNnFnU2lNeEpWTVoyazQybjhtM05vcko0NENpandWVl9pSVRSV2JtRzhqZmNYWnhRRUhiaUJUX2dyYXQ2aUk0RWtsMllxQ1JtMVdXWnI1V19CUGozTzZDOWc9PQ==) # <-- Put your encrypted keystore alias password here
                CM_KEY_ALIAS_USERNAME: Encrypted(Z0FBQUFBQmdzNnJ3dWZQUmtSN2VtRC1RLU9yZy1xSVM1cnNDWlc5aXdQN2F6SmVtR2FSNFpOVVBXZjNxR3NkUVJidjlNUW5ROUxBT0lGZHRnX1NDeHRvMTNMODlqODhHelE9PQ==) # <-- Put your encrypted keystore alias username here 
            node: latest
        triggering:
            events:
                - push
                - tag
                - pull_request
            branch_patterns:
                - pattern: develop
                  include: true
                  source: true
        scripts:
            - name: Install npm dependencies
              script: |
                npm install
            - name: Set Android SDK location
              script: |
                echo "sdk.dir=$ANDROID_SDK_ROOT" > "$FCI_BUILD_DIR/android/local.properties"
            - name: Set up keystore
              script: |
                    echo $CM_KEYSTORE | base64 --decode > /tmp/keystore.keystore
                    cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
                    storePassword=$CM_KEYSTORE_PASSWORD
                    keyPassword=$CM_KEY_ALIAS_PASSWORD
                    keyAlias=$CM_KEY_ALIAS_USERNAME
                    storeFile=/tmp/keystore.keystore
                    EOF               
            - name: Build Android release
              script: |
                # Set environment variable so it can be used to increment build number in android/app/build.gradle
                # Note that tracks can be specified when retrieving latest build number from Google Play, for example:
                cd android && ./gradlew assembleRelease
        artifacts:
            - android/app/build/outputs/**/*.apk
        publishing:
            # See the following link for details about email publishing - https://docs.codemagic.io/publishing-yaml/distribution/#email
            email:
                recipients:
                    - edrocullen13@gmail.com
                notify:
                  success: true     # To not receive a notification when a build succeeds
                  failure: false    # To not receive a notification when a build fails
